{% if settings.structure == 1 %}
<aside class="sidebar col-sm-3">
{% elseif settings.structure == 2%}
<aside class="sidebar col-sm-3 pull-right">
{% endif %}

    {% element 'snippets/menu' %}
    
    {% if pages.current in ['catalog','search'] %}
        {% if settings.enable_filter %}
            {% if filters %}
                {% element 'smartfilter' %}
            {% else %}
                {% element 'new-smart-filter' %}
            {% endif %}
        {% endif %}
    {% endif %}

    {% if banner.side %}
    <div class="banner banner-sidebar">
        {{ banner.side }}
    </div>
    {% endif %}
    
    {% if settings.store_rating %}
    <div class="store-rating hidden-xs">
        <h4>As melhores</h4>
        <h3>{{ Translation('avaliacoes') }}</h3>
        {% element 'CustomerReview.reviews' %}
    </div>
    {% endif %}

</aside>

<script>
// Tornar grupos de filtros colapsÃ¡veis
document.addEventListener('DOMContentLoaded', function() {
    // Colapsar/expandir grupos de filtros
    const filterTitles = document.querySelectorAll('.filter-title');
    filterTitles.forEach(title => {
        title.addEventListener('click', function() {
            const group = this.closest('.filter-group');
            group.classList.toggle('collapsed');
            
            const content = this.nextElementSibling;
            if (content) {
                content.style.display = group.classList.contains('collapsed') ? 'none' : 'block';
            }
        });
    });
    
    // Contador de filtros aplicados
    const checkboxes = document.querySelectorAll('.smart-filter input[type="checkbox"]');
    function updateFilterCount() {
        const checked = document.querySelectorAll('.smart-filter input[type="checkbox"]:checked').length;
        const filterButton = document.querySelector('.btn-filter');
        if (filterButton && checked > 0) {
            filterButton.textContent = `Aplicar Filtros (${checked})`;
        } else if (filterButton) {
            filterButton.textContent = 'Aplicar Filtros';
        }
    }
    
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateFilterCount);
    });
    
    // Feedback visual ao aplicar filtros
    const filterButton = document.querySelector('.btn-filter');
    if (filterButton) {
        filterButton.addEventListener('click', function() {
            this.innerHTML = '<span class="loading-spinner"></span> Aplicando...';
            this.disabled = true;
        });
    }
});
</script>